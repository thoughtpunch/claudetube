# claudetube - Full Provider Configuration Reference
#
# Place this file at:
#   Project-level: .claudetube/config.yaml   (highest priority)
#   User-level:    ~/.config/claudetube/config.yaml
#
# Configuration priority:
#   1. Environment variables (CLAUDETUBE_CACHE_DIR)
#   2. Project config (.claudetube/config.yaml)
#   3. User config (~/.config/claudetube/config.yaml)
#   4. Built-in defaults
#
# ──────────────────────────────────────────────────────────
# MIGRATING FROM ENVIRONMENT VARIABLES
# ──────────────────────────────────────────────────────────
# If you previously used env vars, they still work as fallbacks:
#
#   OPENAI_API_KEY          → providers.openai.api_key
#   ANTHROPIC_API_KEY       → providers.anthropic.api_key
#   GOOGLE_API_KEY          → providers.google.api_key
#   DEEPGRAM_API_KEY        → providers.deepgram.api_key
#   ASSEMBLYAI_API_KEY      → providers.assemblyai.api_key
#   VOYAGE_API_KEY          → providers.voyage.api_key
#   CLAUDETUBE_CACHE_DIR    → cache_dir
#
# CLAUDETUBE_*_API_KEY variants also work (e.g., CLAUDETUBE_OPENAI_API_KEY).
# YAML config takes priority over env vars when both are set.
# ──────────────────────────────────────────────────────────

# Cache directory for downloaded videos, audio, transcripts, and frames.
# Supports ~ expansion and relative paths (resolved from config file location).
# Default: ~/.claude/video_cache
# cache_dir: ~/.claude/video_cache

providers:
  # ────────────────────────────────────────────────────────
  # API PROVIDER CREDENTIALS
  # ────────────────────────────────────────────────────────
  # Each provider accepts:
  #   api_key: API key (use ${ENV_VAR} to reference environment variables)
  #   model:   Default model name (optional, uses provider default)
  #   (extra): Provider-specific settings as additional keys

  openai:
    api_key: ${OPENAI_API_KEY}
    model: gpt-4o                   # or gpt-4o-mini, gpt-4-turbo, etc.

  anthropic:
    api_key: ${ANTHROPIC_API_KEY}
    model: claude-sonnet-4-20250514       # or claude-3-haiku, claude-3-opus, etc.

  google:
    api_key: ${GOOGLE_API_KEY}
    model: gemini-2.0-flash         # Only provider with native video support

  deepgram:
    api_key: ${DEEPGRAM_API_KEY}
    # Deepgram: transcription with diarization (speaker detection)

  assemblyai:
    api_key: ${ASSEMBLYAI_API_KEY}
    # AssemblyAI: transcription with auto-chapters and diarization

  voyage:
    api_key: ${VOYAGE_API_KEY}
    # Voyage AI: text embeddings for semantic search

  # ────────────────────────────────────────────────────────
  # LOCAL PROVIDER SETTINGS
  # ────────────────────────────────────────────────────────
  local:
    whisper_model: small            # tiny, base, small, medium, large
    whisper_language: en            # Default language (skips detection, faster)
                                    # Video's declared language overrides this
    ollama_model: llava:13b         # Any Ollama model with vision support

  # ────────────────────────────────────────────────────────
  # CAPABILITY PREFERENCES
  # ────────────────────────────────────────────────────────
  # Which provider to use by default for each capability.
  # You can use provider names or aliases (e.g., "gemini" for "google").
  #
  # Available capabilities and valid providers:
  #
  #   transcription: whisper-local, openai, deepgram, assemblyai
  #   vision:        claude-code, anthropic, openai, google, ollama
  #   video:         google (only Gemini supports native video)
  #   reasoning:     claude-code, anthropic, openai, google, ollama
  #   embedding:     voyage, local-embedder

  preferences:
    transcription: whisper-local    # Free, runs locally (default)
    vision: claude-code             # Uses host Claude in Claude Code (default)
    video: google                   # Only Gemini supports native video
    reasoning: claude-code          # Uses host Claude in Claude Code (default)
    embedding: voyage               # High-quality embeddings (default)

  # ────────────────────────────────────────────────────────
  # FALLBACK CHAINS
  # ────────────────────────────────────────────────────────
  # If the preferred provider fails (rate limit, error, unavailable),
  # try these providers in order. claude-code is always available
  # as the ultimate fallback for vision and reasoning.
  #
  # Note: claude-code CANNOT transcribe audio — only use it for
  # vision and reasoning fallbacks.

  fallbacks:
    transcription: [openai, whisper-local]
    vision: [anthropic, openai, claude-code]
    reasoning: [anthropic, openai, claude-code]

# ──────────────────────────────────────────────────────────
# PROVIDER CAPABILITY MATRIX
# ──────────────────────────────────────────────────────────
#
# Provider       | Transcribe | Vision | Video | Reason | Embed | Cost
# ──────────────────────────────────────────────────────────────────────
# whisper-local  |     ✓      |        |       |        |       | Free
# openai         |     ✓      |   ✓    |       |   ✓    |       | $$
# anthropic      |            |   ✓    |       |   ✓    |       | $$
# google         |            |   ✓    |   ✓   |   ✓    |       | $
# deepgram       |     ✓      |        |       |        |       | $
# assemblyai     |     ✓      |        |       |        |       | $
# claude-code    |            |   ✓    |       |   ✓    |       | Free*
# ollama         |            |   ✓    |       |   ✓    |       | Free
# voyage         |            |        |       |        |   ✓   | $
# local-embedder |            |        |       |        |   ✓   | Free
#
# * claude-code is included with Claude Code subscription
# ──────────────────────────────────────────────────────────
